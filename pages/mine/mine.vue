<template>
  <view class="mine-container">
    <!-- ç”¨æˆ·ä¿¡æ¯åŒºåŸŸ -->
    <view class="user-info-wrap">
      <image class="avatar" src="/static/images/avatar.png" mode="widthFix"></image>
      <view class="user-info">
        <text class="user-name">{{ userInfo.name }}</text>
        <text class="user-role">{{ userInfo.role }}</text>
      </view>
    </view>

    <!-- åŠŸèƒ½åˆ—è¡¨ -->
    <view class="func-list">
      <view class="func-item" @click="handleFunc('setting')">
        <text class="func-icon">âš™</text>
        <text class="func-name">ç³»ç»Ÿè®¾ç½®</text>
        <text class="func-arrow">></text>
      </view>
      <view class="func-item" @click="handleFunc('password')">
        <text class="func-icon">ğŸ”’</text>
        <text class="func-name">ä¿®æ”¹å¯†ç </text>
        <text class="func-arrow">></text>
      </view>
      <view class="func-item" @click="handleFunc('help')">
        <text class="func-icon">â“</text>
        <text class="func-name">å¸®åŠ©ä¸­å¿ƒ</text>
        <text class="func-arrow">></text>
      </view>
      <view class="func-item" @click="handleFunc('about')">
        <text class="func-icon">â„¹</text>
        <text class="func-name">å…³äºæˆ‘ä»¬</text>
        <text class="func-arrow">></text>
      </view>
    </view>

    <!-- é€€å‡ºç™»å½•æŒ‰é’® -->
    <button class="logout-btn" @click="logout">é€€å‡ºç™»å½•</button>
  </view>
</template>

<script setup>
import { ref } from 'vue'

// æ¨¡æ‹Ÿç”¨æˆ·ä¿¡æ¯
const userInfo = ref({
  name: 'å·¥å‚ç®¡ç†å‘˜',
  role: 'ç®¡ç†å‘˜'
})

// åŠŸèƒ½ç‚¹å‡»å¤„ç†
const handleFunc = (type) => {
  uni.showToast({
    title: `ç‚¹å‡»äº†${type}`,
    icon: 'none'
  })
}

// é€€å‡ºç™»å½•
const logout = () => {
  uni.showModal({
    title: 'æç¤º',
    content: 'æ˜¯å¦ç¡®è®¤é€€å‡ºç™»å½•ï¼Ÿ',
    success: (res) => {
      if (res.confirm) {
        uni.showToast({
          title: 'é€€å‡ºæˆåŠŸ',
          icon: 'success'
        })
        // å®é™…é¡¹ç›®ä¸­å¯è·³è½¬åˆ°ç™»å½•é¡µ
      }
    }
  })
}
</script>

<style scoped>
.mine-page {
  padding: 10rpx;
  padding-bottom: 80rpx; /* æ–°å¢ï¼šç•™å‡ºTabBarç©ºé—´ */
  background-color: #F8F8F8;
  min-height: 100vh;
}

/* ç”¨æˆ·ä¿¡æ¯æ ·å¼ */
.user-info-wrap {
  display: flex;
  align-items: center;
  gap: 15px;
  background-color: #fff;
  border-radius: 8px;
  padding: 20px;
  margin-bottom: 20px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.avatar {
  width: 80px;
  height: 80px;
  border-radius: 50%;
}

.user-info {
  display: flex;
  flex-direction: column;
  gap: 5px;
}

.user-name {
  font-size: 18px;
  font-weight: bold;
  color: #333;
}

.user-role {
  font-size: 14px;
  color: #666;
}

/* åŠŸèƒ½åˆ—è¡¨æ ·å¼ */
.func-list {
  background-color: #fff;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  margin-bottom: 20px;
}

.func-item {
  display: flex;
  align-items: center;
  gap: 15px;
  padding: 15px;
  border-bottom: 1px solid #eee;
}

.func-item:last-child {
  border-bottom: none;
}

.func-icon {
  font-size: 20px;
  color: #007AFF;
}

.func-name {
  flex: 1;
  font-size: 16px;
  color: #333;
}

.func-arrow {
  font-size: 14px;
  color: #999;
}

/* é€€å‡ºæŒ‰é’®æ ·å¼ */
.logout-btn {
  width: 100%;
  background-color: #F44336;
  color: #fff;
  border: none;
  border-radius: 8px;
  padding: 15px;
  font-size: 16px;
}
</style>